# v1.3.19 Seed Depth Foundation

Last updated: 2026-02-15  
Owner: Core + Wizard

## Summary

This change establishes a tracked baseline for v1.3.19 seed-depth work:

- default place seed catalog is now versioned in repo
- optional elevation/traversal/gameplay seed fields are ingested into spatial SQLite
- CI validates both tracked and local seed catalogs
- tracked location overlays are expanded into a gameplay-ready regional graph

## Shipped

- Added tracked default catalog:
  - `core/src/spatial/places.default.json`
  - `core/src/spatial/locations-seed.default.json`
  - expanded to a multi-place regional traversal graph (surface + orbital + subterrain)
- Added schema table for optional per-place seed metadata:
  - `core/src/spatial/schema.sql` (`place_seed_features`)
- Updated migration seeding behavior:
  - `core/services/location_migration_service.py`
  - `memory/spatial/places.json` (if present) is still preferred
  - fallback now uses tracked `core/src/spatial/places.default.json`
  - optional seed fields persist via `place_seed_features`
  - deterministic adjacency inference now fills `links` for places that omit explicit links (same anchor/space/layer; nearest neighbors by cell+z distance)
  - tracked `locations-seed.default.json` overlays now merge into place seeding (for links/elevation/traversal/gameplay primitives)
- Expanded CI seed gate:
  - `tools/ci/check_spatial_seed_catalog.py`
  - validates tracked defaults (`anchors.default.json`, `places.default.json`)
  - validates tracked locations seed (`locations-seed.default.json`) and placeRef parity against `places.default.json`
  - validates minimum seed depth baseline (>=8 gameplay-ready locations)
  - validates `links` integrity (`placeId` targets exist, no self-links, reciprocal connectivity)
  - validates local `memory/spatial/*.json` when present
  - validates required gameplay-ready fields (`z`, `z_min`, `z_max`, `links`, `quest_ids`, `interaction_points`) and optional traversal/combat overlays (`portals`, `stairs`, `ramps`, `npc_spawn`, `hazards`, `loot_tables`)
- Added migration regression tests:
  - `core/tests/location_migration_spatial_seed_test.py`

## Not Yet Complete

- Production-scale regional/world seed corpus expansion beyond the default baseline graph.
