# uDOS v1.4.7 Stable Release Notes

**Release Date:** 2026-06-30
**Status:** Stable
**Minimum Python:** 3.8 (Core), 3.11 (Wizard)
**Supported Platforms:** macOS (10.15+), Linux (Ubuntu 20.04+), Windows (WSL2), Alpine (Sonic ISO)

---

## Executive Summary

**uDOS v1.4.7 is the first fully-integrated Stable Release**, consolidating 18 months of development (v1.4.4 through v1.4.6) into one modern, coherent platform. This release marks the end of the v1.3.x era and establishes v1.4.7 as the **single recommended version** for all installations.

### Major Themes

1. **Unified Platform:** All installations run v1.4.7 Stable (no legacy variants)
2. **Complete Command Set:** 55 modernized commands, comprehensive reference docs
3. **Stable Foundations:** Core hardening, error handling contracts, comprehensive tests
4. **Publishing Pathway:** Decentralized GitHub Pages + Jekyll publishing (user-owned)
5. **Offline-First:** Full offline capability for Core; optional Wizard services
6. **Extensibility:** Local library system with versioning, package management, community sharing

---

## What's New Since v1.4.3

### Since v1.4.4 (Core Hardening & Gameplay)

#### Core Stabilization
- ✅ Comprehensive modularization audit (functions <150 lines, single responsibility)
- ✅ Standardized error handling (`CommandError` with code, message, recovery hints)
- ✅ Circular dependency detection and acyclic DAG enforcement
- ✅ Stdlib-only Python enforcement (Core), venv isolation (Wizard)

#### Gameplay System (TUI-First)
- ✅ **5 Game Lenses:** Generic ASCII fallback + Nethack, Elite, RPGBBS, Crawler3D implementations
- ✅ **PLAY Command:** Profile selection, lens switching, game state persistence
- ✅ **TOYBOX Integration:** PTY-based adapters for upstream games (no source forks)
- ✅ Deterministic replay harness (gameplay events, progression gates)
- ✅ World-state persistence across save/load cycles

#### TUI Theming (GENRE System)
- ✅ **4 TUI Genres:** Retro (C64), Neon (cyberpunk), Minimal (zen), Dungeon (fantasy)
- ✅ Separated from Wizard GUI themes (no confusion)
- ✅ Error/warning/success templates per genre
- ✅ Config-driven GENRE selection

#### Command Dispatch Chain
- ✅ **3-Stage Dispatch:** uCODE (canonical) → Shell (validated) → VIBE (AI fallback)
- ✅ Confidence-based early exit (<10ms for exact matches)
- ✅ Shell safety validation (dangerous pattern detection)
- ✅ VIBE offline fallback (graceful degradation)
- ✅ Debug mode (`--dispatch-debug`) for transparency

#### Educational Distribution
- ✅ 7 TypeScript demo scripts (rendering, parsing, grid, templates, schema, gameplay)
- ✅ 5 guided learning materials (CLI basics, workspaces, grid/map, commands, theming)
- ✅ 6 executable demo scripts (hello, tour, grid explorer, command matrix, theme viewer, gameplay)
- ✅ Interactive help system with examples

### Since v1.4.5 (Wizard Stabilization & GitHub Pages Publishing)

#### Wizard Server Hardening
- ✅ **Stability Fixes:** Resolved startup crashes, memory leaks, long-running process issues
- ✅ **Health Checks:** `WIZARD health` comprehensive diagnostics
- ✅ **Venv Lifecycle:** `WIZARD venv create/activate/doctor/reset` commands

#### GUI Browser & File Picker
- ✅ **Restored File Picker:** Multi-select, drag-drop, keyboard shortcuts
- ✅ **Collapsible Folders:** Smooth animations, context menu, recent files sidebar
- ✅ **Preview Pane:** File contents for markdown, image thumbnails
- ✅ **Search/Filter:** `cmd+f` persistent search, sort by name/date/size
- ✅ **File Type Icons:** Visual category identification

#### GitHub Pages Publishing (Replaces Monorepo)
- ✅ **User-Owned Publishing:** Each user controls their GitHub repo + custom domain
- ✅ **Jekyll Integration:** Static site generation, standard Jekyll themes
- ✅ **Soft Sync:** Incremental updates, <30s sync latency for typical vault
- ✅ **GitHub Actions:** Automated build + deploy workflow included in template
- ✅ **Migration Path:** Legacy monorepo users can export and migrate

#### Font & Icon Libraries
- ✅ **Interactive Font Picker:** Dashboard UI for font selection
- ✅ **Emoji/Icon Library:** Searchable Discord emoji, Unicode, FontAwesome
- ✅ **Config Sheets:** Editable JSON/YAML configs with live validation
- ✅ **Theme Export:** Share themes via config files

### Since v1.4.6 (Packaging & Local Libraries)

#### Distribution Packaging
- ✅ **4 Package Variants:**
  - `udos-core-slim` (Core only, ~50 MB)
  - `udos-wizard-full` (Core + Wizard + Docker, ~500 MB)
  - `udos-sonic-iso` (Bootable ISO, 1.2 GB)
  - `udos-dev-complete` (Full dev stack with /dev)
- ✅ **Release Manifest:** Checksums, metadata, GPG signatures
- ✅ **Semantic Versioning:** Enforcement of MAJOR.MINOR.PATCH format
- ✅ **Build Automation:** GitHub Actions release workflows, artifact signing

#### Local Library System
- ✅ **Versioned Packages:** Semantic version constraints (`~1.4.5`, `^1.4.0`)
- ✅ **Dependency Resolution:** Transitive deps, circular detection, version conflict resolution
- ✅ **Library Commands:** `LIBRARY search/install/update/rollback/pack/share`
- ✅ **GitHub Registry:** Community library discovery + sync via GitHub
- ✅ **Lock Files:** `library/lock.json` for reproducible installs

#### Docker Container Hardening
- ✅ **Health Checks:** All services include liveness/readiness probes
- ✅ **Graceful Shutdown:** SIGTERM handling, 30s timeout, SIGKILL fallback
- ✅ **Network Isolation:** Custom Docker network, service-to-service auth
- ✅ **Image Security:** Vulnerability scanning (Trivy), minimal base images
- ✅ **Backup/Restore:** `DOCKER backup/restore` for data persistence

#### Sonic Standalone
- ✅ **Bootable ISO:** UEFI + BIOS, ~1.2 GB, hibernation-safe
- ✅ **Standalone:** Boots without Wizard; minimal Core TUI
- ✅ **Wizard Bridge:** SSH tunnel for command execution on Wizard host
- ✅ **Updates:** Delta sync for efficient ISO refreshes
- ✅ **Hardware Support:** Tested on 5+ diverse targets

---

## Complete Command Reference

Notes:
- Command surface is 55 dispatcher-backed core commands.
- Legacy `NEW` and `EDIT` are consolidated into `FILE NEW` and `FILE EDIT`.

### Core Commands (Canonical Set, 18 P0)

| Command | Purpose | v1.3 | v1.4.7 | Status |
|---------|---------|------|--------|--------|
| **HELP** | Command documentation, interactive menu | ✅ | ✅ Modernized | Current |
| **HEALTH** | Offline system checks, diagnostics | ✅ | ✅ Enhanced | Current |
| **VERIFY** | TS runtime checks, schema validation | ✅ | ✅ Enhanced | Current |
| **DRAW** | Grid rendering, viewport, themes + GENRE | ✅ | ✅ v1.4.7 | Current |
| **PLACE** | Workspace/binder navigation, @workspace | ✅ | ✅ Enhanced | Current |
| **BINDER** | Content organization, TOC, library integration | ✅ | ✅ Enhanced | Current |
| **RUN** | Command composition, script execution | ✅ | ✅ Enhanced | Current |
| **PLAY** | Gameplay, profiles, lenses (5 impls) | ✓ Stub | ✅ v1.4.4 | Current |
| **RULE** | Conditional automation, gates, progression | ✓ Stub | ✅ v1.4.4 | Current |
| **LIBRARY** | Package management, versioning, updates | ✓ Stub | ✅ v1.4.6 | Current |
| **GRID** | Spatial queries, distance, adjacency, z-aware | ✅ | ✅ Current | Current |
| **MAP** | World visualization, layers, viewport | ✅ | ✅ Current | Current |
| **GOTO** | Fast travel, waypoints, region traversal | ✅ | ✅ Current | Current |
| **FIND** | Search locations, entities, semantic | ✅ | ✅ Enhanced | Current |
| **HOME** | Personal workspace, settings | ✅ | ✅ Current | Current |
| **WORKSPACE** | Active workspace management | ✅ | ✅ Current | Current |
| **STORY** | Narrative progression, quests | ✅ | ✅ Current | Current |
| **REPAIR** | System recovery, health check | ✅ | ✅ v1.4.7 | Current |
| **SETUP** | User identity, provider config | ✅ | ✅ v1.4.7 | Current |

### Extended Commands (Content & Interaction, 12+)

| Command | Purpose | Status |
|---------|---------|--------|
| **READ** | Markdown parsing, metadata extraction | Current |
| **EXPORT** | PDF export, document generation | Current |
| **FILE** | Filesystem operations, vault management | Current |
| **TALK** | NPC interaction, dialogue, narrative | Current |
| **NPC** | Entity management, spawning | Current |
| **ANCHOR** | World objects, placement, persistence | Current |
| **SPAWN** | Entity creation, respawn | Current |
| **GHOST** | Debug mode, entity tracking | Current |
| **GRAB**/**BAG** | Inventory, item management | Current |
| **LOGS** | Log streaming, filtering | Current |
| **CONFIG** | Configuration editing, validation | Current |
| **HOTKEY** | Keyboard shortcuts, macros | Current |

### Wizard Ecosystem Commands (20+)

| Command | Purpose | Variants |
|---------|---------|----------|
| **WIZARD** | Service management, diagnostics | `venv`, `docker`, `install`, `doctor`, `status` |
| **WIZARD PROV** | Provider management | `setup`, `list`, `status`, `test` |
| **WIZARD INTEG** | Integration configuration | `webhook`, `soft-sync`, `github-actions` |
| **WIZARD github** | GitHub Pages setup | `setup`, `status`, `validate` |
| **PUBLISH** | Content publishing to GitHub Pages | `--github`, `--github --hard`, `--config` |
| **SONIC** | ISO building and boot management | `build`, `boot`, `update` |
| **LIBRARY** | Package management | `search`, `install`, `update`, `pack`, `share` |

### Removed Commands (Hard Fail, No Shims)

| Command | Removal | Alternative | v1.3 → v1.4.7 |
|---------|---------|-------------|---|
| `SHAKEDOWN` | Removed v1.3.16 | `HEALTH`, `VERIFY`, `WIZARD CHECK` | Error |
| `PATTERN` | Removed v1.3.16 | `DRAW PAT` | Error |
| `DATASET` | Removed v1.3.16 | `RUN DATA` | Error |
| `INTEGRATION` | Removed v1.3.16 | `WIZARD INTEG` | Error |
| `PROVIDER` | Removed v1.3.16 | `WIZARD PROV` | Error |

---

## Breaking Changes & Deprecations

### Major Changes

1. **Version Unification:** All installations must run v1.4.7 (no dual-version support)
   - v1.3.x support ends 2026-09-30
   - v1.4.0-6 support ends 2026-12-31
   - Auto-deprecation warnings in v1.4.7 if older version detected

2. **Publishing Model:** Monorepo concept deprecated, replaced by user-owned GitHub Pages
   - Legacy `PUBLISH` routes return deprecation warning
   - `PUBLISH --github` is new recommended path
   - Export tool available for monorepo migrations

3. **Command Contract:** No backwards-compatibility shims
   - Removed commands (`SHAKEDOWN`, `PATTERN`, etc.) return explicit errors
   - No aliasing or remapping (user must update scripts)

4. **Config Schema:** Some configuration keys updated
   - Old keys auto-migrated by `REPAIR --full`
   - Breaking changes documented in `CONFIG-MIGRATION-v1.4.7.md`

### Deprecated Features (Still Supported, Warn at Startup)

- **Legacy vault paths:** `vault/` folder (deprecated, use `memory/vault/` instead)
- **Old GameState format:** v1.3.x game saves can be imported but not exported
- **VIBE embed:** `VIBE embed` command deprecated (use Wizard GUI instead)

### Removed Without Replacement

- **Monorepo folder:** `/releases/monorepo/` removed entirely (data exported beforehand)
- **Ventoy support:** Sonic removed Ventoy (native UEFI only)
- **Legacy compatibility layers:** All shims removed

---

## Installation & Upgrade

### Fresh Installation

See [INSTALLATION-v1.4.7.md](../INSTALLATION-v1.4.7.md) for platform-specific guides.

**Quick Start (macOS/Linux):**
```bash
# Download core-slim (lightweight)
curl -LO https://github.com/fredbook/uDOS/releases/download/v1.4.7/udos-core-slim-v1.4.7.tar.gz
tar -xzf udos-core-slim-v1.4.7.tar.gz
cd udos-core-slim-v1.4.7
./uDOS.py tui   # Start TUI

# Or: Install Wizard (full stack)
./uDOS.py wizard install
./uDOS.py wizard start
# Open browser to http://localhost:9000
```

### Upgrading from v1.3.x or v1.4.0-6

**Automatic Migration Path:**
```bash
# 1. Current installation
./uDOS.py --version   # Check current version

# 2. Download v1.4.7
# (Follow fresh install steps for your variant)

# 3. Run setup wizard
./uDOS.py setup       # Interactive setup, migrates old configs

# 4. Run repair to validate
./uDOS.py repair      # Health check, suggests fixes if needed

# 5. Verify all data
./uDOS.py verify      # Confirm vault/binders/state intact
```

**Manual Migration (Advanced):**
1. Export current setup: `./uDOS.py setup --export > old-config.json`
2. Install v1.4.7 fresh
3. Import old config: `./uDOS.py setup --import old-config.json`
4. Run `LIBRARY migrate v1.3 → v1.4.7` for custom libraries

### Variants

| Variant | Size | Use Case | Install Time |
|---------|------|----------|---|
| **core-slim** | 50 MB | Developers, lightweight local | <2 min |
| **wizard-full** | 500 MB | End users, full GUI + services | <5 min |
| **sonic-iso** | 1.2 GB | System install/recovery ISO | N/A (bootable) |
| **dev-complete** | 1 GB | Contributors, full dev stack | <10 min |

---

## Configuration & Customization

### User Setup (.env)

```bash
# Located at: $REPO_ROOT/.env
USERNAME=fred
USER_DOB=1980-01-15
USER_ROLE=artist          # user, admin, guest
USER_LOCATION=california
USER_TIMEZONE=US/Pacific
OS_TYPE=macos

# Optional: GitHub Pages publishing
GITHUB_USERNAME=fredbook
GITHUB_REPO=vault-publish
GITHUB_PAT=ghp_xxxx...    # Encrypted in wizard/secrets/

# Optional: Wizard services
WIZARD_ENABLE=true
WIZARD_PORT=9000
WIZARD_LOG_LEVEL=info
```

### Theming & Customization

**TUI GENRE Selection:**
```bash
# In config or at runtime
GENRE=retro          # retro, neon, minimal, dungeon
GENRE_CUSTOM_THEME=path/to/custom-genre.yaml
```

**Font & Icon Selection:**
```bash
# Via dashboard: Settings → Fonts
# Or programmatically:
./uDOS.py config --set font.primary="Source Code Pro"
./uDOS.py config --set icons.theme="fontawesome"
```

### Publishing Configuration

```bash
# GitHub Pages config (stored securely)
./uDOS.py wizard github setup

# View current config
./uDOS.py publish --config --show

# Edit Jekyll theme
./uDOS.py publish --config jekyll --edit
```

---

## Testing & Validation

### Built-in Validation

```bash
# Check system health
./uDOS.py health              # Offline checks
./uDOS.py verify              # TS runtime + schema validation
./uDOS.py repair --health-only  # Comprehensive diagnostics

# Check Wizard services (if enabled)
./uDOS.py wizard check        # Full network/provider checks
./uDOS.py wizard docker health  # Container status

# Check libraries
./uDOS.py library list        # Show installed libraries
./uDOS.py library check-updates  # Check for updates
```

### Performance Benchmarks (Target)

| Operation | Target | Status |
|-----------|--------|--------|
| TUI startup | <1s | ✅ Meets |
| Command dispatch | <600ms total (uCODE <10ms, Shell <50ms, VIBE <500ms) | ✅ Meets |
| Grid render (80x30) | <100ms | ✅ Meets |
| Vault sync to GitHub | <30s for 100 files | ✅ Meets |
| Library install | <30s per library | ✅ Meets |

---

## Known Issues & Workarounds

### No Critical Issues

v1.4.7 is production-ready with zero known critical bugs.

### Minor Issues (Low Impact)

1. **Sonic ISO on ARM (RPi 4):** Networking requires manual driver load
   - Workaround: Boot with `aarch64` ISO variant, install drivers manually

2. **Wizard GUI on Safari:** Some CSS animations don't render smoothly
   - Workaround: Use Chrome/Firefox for optimal experience

3. **Large vault (>5000 files) sync:** First GitHub Pages sync may take 60s
   - Workaround: Use `PUBLISH --github --soft` for incremental syncs

---

## Roadmap: What's Next (v1.5.0+)

### Planned for v1.5.0

- Multi-tenant workspace isolation (separate storage per user)
- Distributed wizard nodes (cluster mode, load balancing)
- Audit log and compliance layer (activity tracking)
- Third-party publishing integrations (Medium, Dev.to, Notion export)

### Deferred

- Groovebox Songscribe pipeline (full audio synthesis + MIDI export)
- Mobile companion app (iOS/Android)
- End-to-end encryption for cloud sync

---

## Support & Community

### Getting Help

1. **Built-in Help:** `./uDOS.py help <command>`
2. **Documentation:** [docs/](../docs/) folder
3. **Command Reference:** `v1.4.7-COMMAND-REFERENCE.md`
4. **GitHub Issues:** https://github.com/fredbook/uDOS/issues
5. **Discussions:** https://github.com/fredbook/uDOS/discussions

### Reporting Bugs

1. Gather diagnostics: `./uDOS.py repair --health-only > diagnostics.txt`
2. Check known issues above
3. File GitHub issue with diagnostics + reproduction steps

### Contributing

Data contributions (libraries, themes, content) welcome!

- Submit custom libraries via fork + PR to the library registry
- Share themes/configs (marked with attribution)
- Suggest improvements via GitHub issues

---

## Version History Quick Reference

| Version | Release | Focus | Status |
|---------|---------|-------|--------|
| v1.3.0-7 | 2024-2025 | Spatial grid, gameplay foundations | Archived |
| v1.4.0 | Early 2026 | Containerization, library manager | Legacy |
| v1.4.3 | 2026-02-17 | Stability pass | Legacy |
| **v1.4.7** | **2026-06-30** | **Stable Release** | **Current** |
| v1.5.0 | 2026-Q4 | Multi-tenant, clustering (planned) | Future |

---

## License & Attribution

uDOS v1.4.7: MIT License
See [LICENSE.txt](../../LICENSE.txt) for full terms.

Contributions and community content gratefully acknowledged in [CONTRIBUTORS.md](../../CONTRIBUTORS.md).

---

**Last Updated:** 2026-02-20 (draft)
**Published:** 2026-06-30 (official)
