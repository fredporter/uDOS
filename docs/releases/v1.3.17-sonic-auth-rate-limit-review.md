# v1.3.17 Sonic Auth and Rate-Limit Review

Date: 2026-02-15
Owner: Core + Wizard

## Scope Reviewed

Routes:
- `/api/sonic/*` (`wizard/routes/sonic_plugin_routes.py`)
- `/api/platform/sonic/*` (`wizard/routes/platform_routes.py`)
- `/api/library/integration/sonic*` (`wizard/routes/library_routes.py`)

## Auth Findings

- Sonic routers are mounted in `wizard/server.py` with `auth_guard=self._authenticate_admin`.
- Result: Sonic read/write endpoints require admin token in current deployment.
- This is stricter than the UX spec's optional operator read tier, but acceptable for v1.3.17 release safety.

## Rate-Limit Findings

- Wizard server applies global HTTP middleware: `create_rate_limit_middleware(self.rate_limiter)`.
- Middleware runs before route handlers and applies endpoint-tier checks.
- Sonic endpoints therefore inherit Wizard rate-limiting policy with no Sonic-specific bypass.

## Decision (v1.3.17)

- Accept current policy: admin-only + global rate limiting.
- Defer operator read-tier split to post-v1.3.17 hardening.

## Follow-up (post v1.3.17)

- Introduce Sonic read-tier auth guard for selected GET routes.
- Add per-endpoint quota telemetry labels for Sonic actions/builds.
