# v1.3.0 Release Test Plan (Extensive)

**Status:** Planned
**Owners:** Core, Wizard, App, Distribution
**Scope:** Release validation for tag `v1.3.0`

---

## Objectives

- Validate the **release tag** and release manifest are coherent and usable.
- Run **cross-component smoke + regression coverage** (Core, Wizard, App, Extensions, Renderer/Indexer).
- Confirm **offline-first baseline** and that optional cloud lanes remain optional.
- Produce a **repeatable test record** for future v1.3.x hotfixes.

---

## Scope

### In Scope

- Core TUI (startup, command handling, logs)
- Wizard Server + Dashboard
- Renderer + Task Indexer (CLI + API)
- Extensions API server
- App (Tauri) smoke and build
- Release manifest sanity checks

### Out of Scope

- iOS app
- Experimental Goblin MODE renderers (unless explicitly requested)
- Cloud-only integrations (Gmail relay, OAuth, external webhooks)

---

## Environments Matrix

| Environment | Focus | Notes |
| --- | --- | --- |
| macOS (primary) | Full stack (Core + Wizard + App) | Target dev workstation baseline |
| Ubuntu 22.04+ | Core + Wizard + Renderer | Headless + server workflow |
| Windows 11 (dev) | Core TUI + Wizard smoke | Verify launcher compatibility |
| Alpine Linux | Core TUI + offline baseline | Sonic USB target |

---

## Pre-Flight Checklist

- [ ] Confirm working tree is clean (or record local diffs for test report).
- [ ] Confirm testing target is the **v1.3.0 tag** (or the release commit).
- [ ] Create a fresh Python venv and install dependencies.
- [ ] Verify Node 18+ is available for Core/App tooling.
- [ ] Run version dashboard: `python -m core.version show`
- [ ] Confirm required ports are free: `8765` (Wizard), `5001` (API extension).

---

## Move 1 - Core TUI Smoke

**Goal:** Validate local/offline command handling and stability.

### Steps

- [ ] Start Core TUI: `./bin/start_udos.sh` or `./bin/start-core-tui.sh`
- [ ] Run baseline commands: `HELP`, `STATUS`, `WIZARD start`
- [ ] Verify logs update: `memory/logs/session-commands-*.log`
- [ ] Confirm no network dependency for basic commands.

**Expected:** Core starts, commands render, no crashes, logs written.

---

## Move 2 - Wizard Server + Dashboard

**Goal:** Validate Wizard service startup and UI delivery.

### Steps

- [ ] Start Wizard server: `./bin/start-wizard-server.sh`
- [ ] Open dashboard: `http://localhost:8765/`
- [ ] If available, hit health endpoint: `http://localhost:8765/health`
- [ ] Verify API root responds: `http://localhost:8765/api/v1`
- [ ] Check Wizard logs: `memory/logs/api-*.log`

**Expected:** Dashboard loads, API responds, logs show healthy startup.

---

## Move 3 - Renderer + Task Indexer (CLI)

**Goal:** Validate static site generation and task indexing.

### Build

```bash
cd core
npm install
npm run build
```

### Renderer CLI

```bash
node dist/renderer/cli.js \
  --theme prose \
  --vault ../vault \
  --themes ../themes \
  --output ../vault/_site \
  --mission nightly-prose
```

**Expected:**
- `vault/_site/prose/...` generated
- Run report in `vault/06_RUNS/nightly-prose/`

### Task Indexer CLI

```bash
node dist/tasks/cli.js \
  --vault ../vault \
  --db ../vault/.udos/state.db
```

**Expected:** SQLite tables created and populated.

---

## Move 4 - Renderer + Indexer Tests

```bash
cd core
npm run test:renderer
npm run test:renderer-cli
npm run test:tasks
```

**Expected:** All renderer/indexer tests pass.

---

## Move 5 - Wizard Renderer API Lane

**Goal:** Validate API render triggers.

```bash
curl http://localhost:8765/api/renderer/themes
curl http://localhost:8765/api/renderer/site
curl http://localhost:8765/api/renderer/missions
curl -X POST http://localhost:8765/api/renderer/render \
  -H "Content-Type: application/json" \
  -d '{"theme":"prose","mission_id":"manual-prose"}'
```

**Expected:** JSON responses, no auth errors when public mode is enabled.

---

## Move 6 - Extensions API Server

**Goal:** Validate REST/WebSocket extension server.

```bash
python -m extensions.api.server
```

- [ ] Open API docs: `http://localhost:5001/docs`
- [ ] Verify `/api/*` endpoints list.

**Expected:** Swagger docs load and endpoints list successfully.

---

## Move 7 - App (Tauri) Smoke

**Goal:** Validate macOS app build + runtime launch.

```bash
cd app
npm install
npm run tauri:dev
```

Checklist:
- [ ] App launches without console errors.
- [ ] Editor opens and accepts input.
- [ ] File open/save works on a sample markdown file.

**Expected:** Basic editor flows work in dev mode.

---

## Move 8 - Release Manifest Sanity

**Goal:** Ensure the release manifest is coherent for distribution.

- [ ] Open `v1.3.0-release-manifest.yml`.
- [ ] Confirm core components listed match the release scope.
- [ ] Validate referenced paths exist in the repo.

**Expected:** Manifest matches current release contents.

---

## Exit Criteria

- All phases complete with **no blocking failures**.
- Any failures have reproducible steps and logs captured.
- Results recorded in a local run log: `memory/logs/release-test-v1.3.0-YYYY-MM-DD.md`

---

## Failure Capture Checklist

- [ ] Record command used and environment
- [ ] Capture logs: `memory/logs/session-commands-*.log`, `memory/logs/api-*.log`, `memory/logs/dev-*.log`
- [ ] Add screenshots for UI failures (Wizard/App)
- [ ] Note whether failure is **blocker** or **non-blocker**

---

## Notes

- Use `python -m core.version show` for version validation.
- Keep Core offline-first: no cloud dependencies required for tests.
- If `WIZARD_RENDERER_PUBLIC=0`, add `Authorization: Bearer $WIZARD_ADMIN_TOKEN` for renderer API calls.
