# uDOS .gitignore for PUBLIC Repo (fredporter/uDOS)
# Root repo is PUBLIC - open source components only
# /dev/ is a GIT SUBMODULE pointing to private repo (fredporter/uDOS-dev)

# ═══════════════════════════════════════════════════════════════════════════════
# STRUCTURE:
#   PUBLIC (root):   core, wizard, extensions, docs, knowledge, library
#   PRIVATE (/dev):  goblin, empire, app, groovebox - as git submodule
#   LOCAL (memory):  user data, logs, credentials - never committed
# ═══════════════════════════════════════════════════════════════════════════════

# ---------- PRIVATE SUBMODULE ----------
# /dev is tracked as a git submodule, not directly
# The submodule reference is in .gitmodules

# ---------- Local workspace data (never commit anything here) ----------
memory/*
memory/**
!memory/.gitkeep
!memory/README.md
!memory/WORKSPACE-STRUCTURE.md

# Bank structure: templates tracked, user data ignored
!memory/bank/
!memory/bank/system/
!memory/bank/system/README.md
!memory/bank/system/startup-script.md
!memory/bank/system/reboot-script.md
memory/bank/locations/
memory/bank/knowledge/
memory/bank/checklists/
memory/bank/binders/

# Tests: local-only workspace (never commit)
memory/tests/

# Container clones (local, never tracked)
# /library/*/container.json are definitions (tracked)
# /memory/library/containers/* are clones (not tracked)
memory/library/containers/
!memory/library/containers/.gitkeep

# Local scratch folders
.archive/
**/.archive/
.dev/
**/.dev/
.tmp/
**/.tmp/
.cache/
**/.cache/
.build/
**/.build/
private/
**/private/

# ---------- SECRETS & CREDENTIALS (CRITICAL) ----------
# Environment files with secrets
.env
.env.local
.env.*.local
.env.development.local
.env.test.local
.env.production.local

# Config files with secrets
wizard/config/assistant_keys.json
wizard/config/github_keys.json
wizard/config/slack_keys.json
wizard/config/oauth_providers.json
wizard/config/notion_keys.json
public/wizard/config/assistant_keys.json
public/wizard/config/github_keys.json
public/wizard/config/slack_keys.json
public/wizard/config/oauth_providers.json
public/wizard/config/notion_keys.json
**/config/*_keys.json
**/config/*secret*.json
**/config/*token*.json

# Python secrets
.env.*
**/.env
**/.env.*
secrets.py
**/secrets.py
**/secret.py

# Node secrets
.env.local
.env.*.local
**/secrets.js
**/secret.js

# OS & tool secrets
.DS_Store/.env
.vscode/settings.local.json
.vscode/launch.local.json

# Private keys & certificates
*.pem
*.key
*.p8
*.p12
*.pfx

# OAuth/API tokens
**/oauth_tokens.json
**/oauth.json
**/tokens.json
**/token.json
**/credentials.json
**/secrets.json

# API key files
**/*_api_key*
**/*_token*
**/*_secret*
**/*_credentials*

# Password databases
**/*.kdbx
**/*.db-journal

# Dependencies & build outputs
.venv/
**/venv/
env/
**/env/
node_modules/
**/node_modules/
package-lock.json
npm-debug.log*
yarn-debug.log*
yarn-error.log*
dist/
build/
coverage/
**/coverage/
*.vsix
*.egg
*.egg-info/
**/target/
*.dmg
*.deb
*.AppImage
*.msi
*.app
**/bundle/
distribution/
distribution/**

# ---------- Logs, runtime state, databases ----------
*.log
*.jsonl
*.pid
*.state
*.db
*.sqlite
*.sqlite3
nohup.out

# ---------- Secrets & credentials ----------
.env
.env.*
*.key
*.secret
assistant_keys.json
wizard/config/assistant_keys.json
wizard/config/oauth_providers.json
wizard/config/slack_keys.json
memory/system/user/gmail_credentials.json
memory/system/user/.gmail_token.enc
*.gmail_token*

# ---------- Tests & fixtures (generated) ----------
.pytest_cache/
**/.pytest_cache/
test_*.py
test_*.sh
/test_*.uscript

# ---------- IDE / OS detritus ----------
.DS_Store
**/.DS_Store
.vscode/settings.json
.vscode/*.log
.idea/
*.swp
*.swo
*~

# ---------- Python artifacts ----------
__pycache__/
**/__pycache__/
*.py[cod]
*$py.class
*.pyo
*.pyc
.Python
*.so

# ---------- Legacy / deprecated ----------
sandbox/
data/
scripts/
uDOS.wiki/

# ---------- External repos (local clones, not tracked) ----------
# Both /library and /dev/library follow the same rules:
# TRACK ONLY: container.json, container.template.json, *.md docs, setup scripts
# IGNORE: cloned/downloaded repos, node_modules, build outputs, .git directories
library/**/
!library/container.schema.json
!library/container.template.json
!library/README.md
!library/*.md
!library/*/setup.sh
!library/*/setup.py
!library/*/README.md
!library/*/.gitkeep

dev/library/**/
!dev/library/README.md
!dev/library/*.md
!dev/library/*/setup.sh
!dev/library/*/setup.py
!dev/library/*/README.md
!dev/library/*/.gitkeep

# ---------- Allowlisted project files ----------
!*.md
!*.txt
!*.json
!*.yaml
!*.yml
!*.toml
!*.cfg
!*.ini
!requirements.txt
!setup.py
!.gitignore
!.gitattributes
!LICENSE*
!CREDITS*
!CHANGELOG*
!CONTRIBUTING*
!CODE-OF-CONDUCT*

# ---------- SECRETS & CREDENTIALS (HIGH PRIORITY - after whitelist override) ----------
# These must come AFTER !*.json to take precedence
wizard/config/assistant_keys.json
wizard/config/github_keys.json
wizard/config/slack_keys.json
wizard/config/oauth_providers.json
wizard/config/notion_keys.json

# ---------- BACKUP FILES & TEMP ----------
*.bak
*.backup
*.backup.*
*~
.DS_Store

# ---------- ADDITIONAL LOCAL FILE PROTECTIONS (2026-01-31) ----------
# Ensure all memory/ subdirectories are blocked (except whitelisted tests above)
memory/logs/**
memory/binders/**
memory/library/**
memory/private/**
memory/story/**
memory/user/**
memory/wizard/**

# Wizard secrets (redundant but explicit)
wizard/secrets.tomb

# Core sonic directory if it contains local/test files
core/sonic/**/*.log
core/sonic/**/*.state
core/sonic/**/private/
