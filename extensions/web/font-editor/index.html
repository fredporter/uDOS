<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uDOS Font Editor v1.3</title>

    <!-- system.css - Retro Mac System 6 Styling -->
    <link rel="stylesheet" href="../shared/system.css">

    <meta name="description" content="Create custom 16×16 bitmap fonts for uDOS terminal">

    <style>
        /* Custom overrides for Font Editor */
        body {
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }

        .window {
            max-width: 1200px;
            width: 100%;
        }

        .window-pane {
            padding: 1rem;
            overflow-y: auto;
            max-height: 80vh;
        }

        .editor-layout {
            display: flex;
            gap: 20px;
        }

        .sidebar {
            min-width: 250px;
            flex-shrink: 0;
        }

        .section {
            margin-bottom: 20px;
            padding: 10px;
            border: 1.5px solid #000;
            background: #fff;
        }

        .section h3 {
            margin: 0 0 10px 0;
            font-family: Chicago_12;
            font-size: 14px;
        }

        .section label {
            display: block;
            margin-bottom: 5px;
            font-family: Chicago_12;
            font-size: 14px;
        }

        .glyph-nav {
            display: flex;
            gap: 5px;
            margin-top: 10px;
        }

        .glyph-nav button {
            flex: 1;
        }

        .current-glyph {
            margin-top: 15px;
            padding: 20px;
            border: 1.5px solid #000;
            text-align: center;
            font-size: 48px;
            background: #fff;
        }

        .tools {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .tool-row {
            display: flex;
            gap: 5px;
        }

        .tool-row button {
            flex: 1;
            padding: 5px;
        }

        .file-ops {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .file-ops button {
            width: 100%;
        }

        .stats {
            font-family: Chicago_12;
            font-size: 14px;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }

        .canvas-area {
            flex: 1;
        }

        .editor-canvas {
            margin-bottom: 20px;
            border: 1.5px solid #000;
            background: #fff;
            padding: 10px;
            display: flex;
            justify-content: center;
        }

        #grid-editor {
            border: 1px solid #000;
            cursor: crosshair;
        }

        .preview-area {
            border: 1.5px solid #000;
            padding: 15px;
            background: #fff;
        }

        .preview-area h3 {
            margin: 0 0 10px 0;
            font-family: Chicago_12;
            font-size: 14px;
        }

        .preview-controls {
            margin-bottom: 15px;
        }

        #preview-text {
            width: 100%;
            box-sizing: border-box;
        }

        #preview-canvas {
            border: 1px solid #000;
            background: #fff;
            display: block;
            max-width: 100%;
        }

        .details-bar {
            font-family: Chicago_12;
            font-size: 12px;
        }

        #status-message {
            display: none;
            position: fixed;
            bottom: 60px;
            left: 50%;
            transform: translateX(-50%);
            background: #fff;
            border: 2px solid #000;
            padding: 10px 20px;
            box-shadow: 2px 2px;
            z-index: 1000;
            font-family: Chicago_12;
        }

        kbd {
            font-family: Chicago_12;
            font-size: 11px;
            padding: 2px 4px;
            border: 1px solid #000;
            background: #fff;
        }
    </style>
</head>
<body>
    <div class="window">
        <div class="title-bar">
            <button aria-label="Close" class="close"></button>
            <h1 class="title">🎨 uDOS Font Editor</h1>
            <button aria-label="Resize" class="resize"></button>
        </div>
        <div class="separator"></div>

        <div class="details-bar">
            <span>16×16 Bitmap Font Creator • uCELL Standard</span>
            <span id="glyph-count-header">Glyphs: 0</span>
        </div>
        <div class="separator"></div>

        <div class="window-pane">
            <div class="modeless-dialog" style="padding: 10px; margin-bottom: 15px;">
                <div class="field-row" style="justify-content: flex-start;">
                    <label for="font-name">Font Name:</label>
                    <input id="font-name" type="text" value="uDOS Custom" style="width: 200px;">
                    <label for="font-author" style="margin-left: 15px;">Author:</label>
                    <input id="font-author" type="text" placeholder="Your name" style="width: 150px;">
                </div>
            </div>

            <div class="editor-layout">
                <!-- Sidebar -->
                <aside class="sidebar">
                    <!-- Glyph Selector -->
                    <div class="section">
                        <h3>GLYPH SELECTOR</h3>
                        <label>Character:</label>
                        <select id="glyph-select">
                        <optgroup label="Basic Latin (ASCII)">
                            <option value="0x0020">  (Space)</option>
                            <option value="0x0021">! (Exclamation)</option>
                            <option value="0x0022">" (Quote)</option>
                            <option value="0x0023"># (Hash)</option>
                            <option value="0x0024">$ (Dollar)</option>
                            <option value="0x0025">% (Percent)</option>
                            <option value="0x0026">& (Ampersand)</option>
                            <option value="0x0027">' (Apostrophe)</option>
                            <option value="0x0028">( (Left Paren)</option>
                            <option value="0x0029">) (Right Paren)</option>
                            <option value="0x002A">* (Asterisk)</option>
                            <option value="0x002B">+ (Plus)</option>
                            <option value="0x002C">, (Comma)</option>
                            <option value="0x002D">- (Hyphen)</option>
                            <option value="0x002E">. (Period)</option>
                            <option value="0x002F">/ (Slash)</option>
                            <option value="0x0030">0 (Zero)</option>
                            <option value="0x0031">1 (One)</option>
                            <option value="0x0032">2 (Two)</option>
                            <option value="0x0033">3 (Three)</option>
                            <option value="0x0034">4 (Four)</option>
                            <option value="0x0035">5 (Five)</option>
                            <option value="0x0036">6 (Six)</option>
                            <option value="0x0037">7 (Seven)</option>
                            <option value="0x0038">8 (Eight)</option>
                            <option value="0x0039">9 (Nine)</option>
                            <option value="0x003A">: (Colon)</option>
                            <option value="0x003B">; (Semicolon)</option>
                            <option value="0x003C">< (Less Than)</option>
                            <option value="0x003D">= (Equals)</option>
                            <option value="0x003E">> (Greater Than)</option>
                            <option value="0x003F">? (Question)</option>
                            <option value="0x0040">@ (At Sign)</option>
                            <option value="0x0041" selected>A (Uppercase A)</option>
                            <option value="0x0042">B (Uppercase B)</option>
                            <option value="0x0043">C (Uppercase C)</option>
                            <option value="0x0044">D (Uppercase D)</option>
                            <option value="0x0045">E (Uppercase E)</option>
                            <option value="0x0046">F (Uppercase F)</option>
                            <option value="0x0047">G (Uppercase G)</option>
                            <option value="0x0048">H (Uppercase H)</option>
                            <option value="0x0049">I (Uppercase I)</option>
                            <option value="0x004A">J (Uppercase J)</option>
                            <option value="0x004B">K (Uppercase K)</option>
                            <option value="0x004C">L (Uppercase L)</option>
                            <option value="0x004D">M (Uppercase M)</option>
                            <option value="0x004E">N (Uppercase N)</option>
                            <option value="0x004F">O (Uppercase O)</option>
                            <option value="0x0050">P (Uppercase P)</option>
                            <option value="0x0051">Q (Uppercase Q)</option>
                            <option value="0x0052">R (Uppercase R)</option>
                            <option value="0x0053">S (Uppercase S)</option>
                            <option value="0x0054">T (Uppercase T)</option>
                            <option value="0x0055">U (Uppercase U)</option>
                            <option value="0x0056">V (Uppercase V)</option>
                            <option value="0x0057">W (Uppercase W)</option>
                            <option value="0x0058">X (Uppercase X)</option>
                            <option value="0x0059">Y (Uppercase Y)</option>
                            <option value="0x005A">Z (Uppercase Z)</option>
                            <option value="0x005B">[ (Left Bracket)</option>
                            <option value="0x005C">\ (Backslash)</option>
                            <option value="0x005D">] (Right Bracket)</option>
                            <option value="0x005E">^ (Caret)</option>
                            <option value="0x005F">_ (Underscore)</option>
                            <option value="0x0060">` (Backtick)</option>
                            <option value="0x0061">a (Lowercase a)</option>
                            <option value="0x0062">b (Lowercase b)</option>
                            <option value="0x0063">c (Lowercase c)</option>
                            <option value="0x0064">d (Lowercase d)</option>
                            <option value="0x0065">e (Lowercase e)</option>
                            <option value="0x0066">f (Lowercase f)</option>
                            <option value="0x0067">g (Lowercase g)</option>
                            <option value="0x0068">h (Lowercase h)</option>
                            <option value="0x0069">i (Lowercase i)</option>
                            <option value="0x006A">j (Lowercase j)</option>
                            <option value="0x006B">k (Lowercase k)</option>
                            <option value="0x006C">l (Lowercase l)</option>
                            <option value="0x006D">m (Lowercase m)</option>
                            <option value="0x006E">n (Lowercase n)</option>
                            <option value="0x006F">o (Lowercase o)</option>
                            <option value="0x0070">p (Lowercase p)</option>
                            <option value="0x0071">q (Lowercase q)</option>
                            <option value="0x0072">r (Lowercase r)</option>
                            <option value="0x0073">s (Lowercase s)</option>
                            <option value="0x0074">t (Lowercase t)</option>
                            <option value="0x0075">u (Lowercase u)</option>
                            <option value="0x0076">v (Lowercase v)</option>
                            <option value="0x0077">w (Lowercase w)</option>
                            <option value="0x0078">x (Lowercase x)</option>
                            <option value="0x0079">y (Lowercase y)</option>
                            <option value="0x007A">z (Lowercase z)</option>
                            <option value="0x007B">{ (Left Brace)</option>
                            <option value="0x007C">| (Pipe)</option>
                            <option value="0x007D">} (Right Brace)</option>
                            <option value="0x007E">~ (Tilde)</option>
                        </optgroup>
                        <optgroup label="Box Drawing">
                            <option value="0x2500">─ (Horizontal)</option>
                            <option value="0x2502">│ (Vertical)</option>
                            <option value="0x250C">┌ (Down Right)</option>
                            <option value="0x2510">┐ (Down Left)</option>
                            <option value="0x2514">└ (Up Right)</option>
                            <option value="0x2518">┘ (Up Left)</option>
                            <option value="0x251C">├ (Vertical Right)</option>
                            <option value="0x2524">┤ (Vertical Left)</option>
                            <option value="0x252C">┬ (Down Horizontal)</option>
                            <option value="0x2534">┴ (Up Horizontal)</option>
                            <option value="0x253C">┼ (Cross)</option>
                            <option value="0x2550">═ (Double Horizontal)</option>
                            <option value="0x2551">║ (Double Vertical)</option>
                            <option value="0x2554">╔ (Double Down Right)</option>
                            <option value="0x2557">╗ (Double Down Left)</option>
                            <option value="0x255A">╚ (Double Up Right)</option>
                            <option value="0x255D">╝ (Double Up Left)</option>
                        </optgroup>
                        <optgroup label="Block Elements">
                            <option value="0x2580">▀ (Upper Half)</option>
                            <option value="0x2584">▄ (Lower Half)</option>
                            <option value="0x2588">█ (Full Block)</option>
                            <option value="0x258C">▌ (Left Half)</option>
                            <option value="0x2590">▐ (Right Half)</option>
                            <option value="0x2591">░ (Light Shade)</option>
                            <option value="0x2592">▒ (Medium Shade)</option>
                            <option value="0x2593">▓ (Dark Shade)</option>
                        </optgroup>
                        </select>

                        <div class="glyph-nav">
                            <button class="btn" id="prev-glyph">◀ Prev</button>
                            <button class="btn" id="next-glyph">Next ▶</button>
                        </div>

                        <div class="current-glyph" id="current-glyph-display">A</div>
                    </div>

                    <!-- Tools -->
                    <div class="section">
                        <h3>TOOLS</h3>
                        <div class="tools">
                            <div class="tool-row">
                                <button class="btn" id="clear" title="Clear grid">⬜ Clear</button>
                                <button class="btn" id="fill" title="Fill all pixels">⬛ Fill</button>
                            </div>
                            <div class="tool-row">
                                <button class="btn" id="flip-h" title="Flip horizontally">↔ Flip H</button>
                                <button class="btn" id="flip-v" title="Flip vertically">↕ Flip V</button>
                            </div>
                            <div class="tool-row">
                                <button class="btn" id="rotate" title="Rotate 90° clockwise">🔄 Rotate</button>
                                <button class="btn" id="invert" title="Invert pixels">◐ Invert</button>
                            </div>
                        </div>
                    </div>

                    <!-- Edit Operations -->
                    <div class="section">
                        <h3>EDIT</h3>
                        <div class="file-ops">
                            <button class="btn" id="copy-glyph" title="Copy current glyph">📋 Copy</button>
                            <button class="btn" id="paste-glyph" title="Paste glyph">📄 Paste</button>
                        </div>
                    </div>

                    <!-- File Operations -->
                    <div class="section">
                        <h3>FILE</h3>
                        <div class="file-ops">
                            <button class="btn" id="export-json">💾 Export</button>
                            <button class="btn" id="import-json">📂 Import</button>
                            <button class="btn" id="reset">🗑 Reset All</button>
                        </div>
                    </div>

                    <!-- Stats -->
                    <div class="section">
                        <h3>STATISTICS</h3>
                        <div class="stats">
                            <div class="stat-item">
                                <span class="stat-label">Glyphs:</span>
                                <span class="stat-value" id="glyph-count">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Current:</span>
                                <span class="stat-value" id="current-unicode">U+0041</span>
                            </div>
                        </div>
                    </div>
                    </aside>

                <!-- Main Canvas Area -->
                <div class="canvas-area">
                    <div class="editor-canvas">
                        <canvas id="grid-editor" width="320" height="320"></canvas>
                    </div>

                    <div class="preview-area">
                        <h3>LIVE PREVIEW</h3>
                        <div class="preview-controls">
                            <input type="text" id="preview-text" value="THE QUICK BROWN FOX 0123456789"
                                   placeholder="Enter preview text...">
                        </div>
                        <canvas id="preview-canvas" width="900" height="60"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <div class="separator"></div>
        <div class="details-bar" style="font-size: 11px;">
            <kbd>Click</kbd> Draw • <kbd>Right-Click</kbd> Erase •
            <kbd>Space</kbd> Clear • <kbd>F</kbd> Fill •
            <kbd>H</kbd> Flip H • <kbd>V</kbd> Flip V •
            <kbd>R</kbd> Rotate • <kbd>I</kbd> Invert •
            <kbd>←/→</kbd> Prev/Next
        </div>
    </div>

    <div id="status-message"></div>
    <input type="file" id="file-input" accept=".json" style="display:none">

    <!-- Scripts -->
    <script src="js/grid-editor.js"></script>
    <script src="js/font-manager.js"></script>
    <script src="js/preview.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
